<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evaluating Application - Adava University</title>
    
    <!-- Favicons -->
    <link rel="icon" type="image/svg+xml" href="../images/favicon.svg">
    <link rel="icon" type="image/png" href="../images/favicon.png">
    <link rel="apple-touch-icon" href="../images/favicon.png">
    
    <!-- Styles -->
    <link rel="stylesheet" href="../css/evaluation.css?v=3e6f418">
    <link rel="stylesheet" href="../css/components/exit-popup.css?v=3e6f418">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css?v=3e6f418">
    
    <!-- Vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js?v=3e6f418"></script>
</head>
<body>
    <!-- Geometric network background -->
    <canvas id="network-bg"></canvas>
    
    <div id="app">
        <!-- Exit Popup Component -->
        <exit-popup :content="exitPopupContent"></exit-popup>
        
        <!-- Loading Phase -->
        <div class="evaluation-container" v-if="!showResult">
            <div class="evaluation-header">
                <div class="logo">
                    <img src="../images/adava-a-icon.png" alt="Adava" class="logo-icon">
                    <img src="../images/adava-text.png" alt="ADAVA UNIVERSITY" class="logo-text-img">
                </div>
                <h1>Analyzing Your Application</h1>
                <p>Our AI is reviewing your responses...</p>
            </div>

            <div class="loading-bar-container">
                <div class="loading-bar">
                    <div class="loading-fill" :style="{ width: progress + '%' }"></div>
                </div>
                <p class="loading-text">{{ loadingMessage }}</p>
            </div>

            <div class="evaluation-steps">
                <div class="step" :class="{ active: currentStep >= 1, complete: currentStep > 1 }">
                    <i class="fas fa-check-circle"></i>
                    <span>Verifying background</span>
                </div>
                <div class="step" :class="{ active: currentStep >= 2, complete: currentStep > 2 }">
                    <i class="fas fa-check-circle"></i>
                    <span>Analyzing goals</span>
                </div>
                <div class="step" :class="{ active: currentStep >= 3, complete: currentStep > 3 }">
                    <i class="fas fa-check-circle"></i>
                    <span>Matching with cohort</span>
                </div>
                <div class="step" :class="{ active: currentStep >= 4, complete: currentStep > 4 }">
                    <i class="fas fa-check-circle"></i>
                    <span>Final evaluation</span>
                </div>
            </div>
        </div>

        <!-- Result Phase -->
        <div class="result-container" v-if="showResult">
            <!-- Scarcity reminder -->
            <div class="scarcity-reminder" style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%); color: white; padding: 12px 20px; border-radius: 8px; text-align: center; margin-bottom: 25px;">
                <strong><i class="fas fa-exclamation-circle"></i> 3 Seats Remaining in February Cohort</strong>
                <span style="margin-left: 15px; opacity: 0.9;">Applications close in 2 days</span>
            </div>
            
            <div class="result-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h1 class="result-title">{{ headline }}</h1>
            <p class="result-subtitle">You're a top match for our February 2026 cohort</p>

            <div class="result-reasons">
                <h3>Why You're a Great Fit:</h3>
                <ul>
                    <li v-for="(reason, index) in reasons" :key="index">
                        <i class="fas fa-star"></i> {{ reason }}
                    </li>
                </ul>
            </div>

            <div class="relevant-projects" v-if="dreamProjectFeedback">
                <h3> About Your Dream Project:</h3>
                <p class="feedback-text">{{ dreamProjectFeedback }}</p>
            </div>

            <div class="relevant-projects" v-if="uniqueSkillConnection">
                <h3> Your Unique Advantage:</h3>
                <p class="feedback-text">{{ uniqueSkillConnection }}</p>
            </div>

            <div class="relevant-projects" v-if="projects.length > 0">
                <h3> What You'll Build:</h3>
                <div class="project-list">
                    <div v-for="(project, index) in projects" :key="index" class="project-item">
                        <i class="fas fa-code"></i> {{ project }}
                    </div>
                </div>
            </div>

            <div class="matched-testimonial" v-if="testimonial">
                <h3>Someone Like You Succeeded:</h3>
                <div class="testimonial-box">
                    <p class="quote">"{{ testimonial.quote }}"</p>
                    <div class="testimonial-author">
                        <strong>{{ testimonial.name }}</strong>
                        <span>{{ testimonial.background }} -> {{ testimonial.afterAdava }}</span>
                    </div>
                </div>
            </div>

            <div class="acceptance-box">
                <h3> You're Accepted!</h3>
                <p>Based on your exceptional application, you've been <strong>immediately accepted</strong> to our February 2026 cohort.</p>
                <p>You're exactly the kind of motivated, creative person who thrives in our AI-first program.</p>
            </div>

            <div class="next-steps" v-if="nextSteps.length > 0">
                <h3>Next Steps:</h3>
                <div v-for="(item, index) in nextSteps" :key="index" class="timeline-item">
                    <div class="timeline-number">{{ index + 1 }}</div>
                    <div class="timeline-content">
                        <h4>{{ item.step || item.title }}</h4>
                        <p>{{ item.time || item.description }}</p>
                    </div>
                </div>
            </div>

            <div class="cta-box">
                <p><strong>Program starts:</strong> February 3rd, 2026</p>
                <p><strong>Spots remaining:</strong> Only 3 of 30 seats left</p>
                <button class="reserve-btn" @click="goToReservation">
                    Secure Your Spot Now
                    <i class="fas fa-arrow-right"></i>
                </button>
                <p class="cta-note">Reserve your seat with $580 (your $10 application fee will be deducted)</p>
            </div>

            <div class="guarantee-reminder">
                <i class="fas fa-shield-check"></i>
                <div>
                    <h4>100% Money-Back Guarantee</h4>
                    <p>If you complete the program and don't feel it was worth every penny, we'll refund your full $590. No questions asked.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="../js/state-manager.js?v=3e6f418"></script>
    
    <!-- Exit Popup Component (must load before evaluation.js) -->
    <script src="../js/components/exit-popup.js?v=3e6f418"></script>
    
    <script src="../js/evaluation.js?v=3e6f418"></script>
    
    <script>
        // Network background animation
        const canvas = document.getElementById('network-bg');
        if (canvas) {
            const ctx = canvas.getContext('2d');

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight * 3;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            const particles = [];
            const particleCount = 150; // Dense network
            const connectionDistance = 250; // Long connections for web-like effect
            const mouseRadius = 200; // Large mouse interaction radius

            let mouse = { x: null, y: null };
            
            document.addEventListener('mousemove', (e) => {
                const rect = canvas.getBoundingClientRect();
                mouse.x = e.clientX - rect.left;
                mouse.y = e.clientY - rect.top;
            });

            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    vx: (Math.random() - 0.5) * 0.6,
                    vy: (Math.random() - 0.5) * 0.6,
                    size: Math.random() * 4 + 3, // 3-7px particles - more visible!
                    baseSize: Math.random() * 4 + 3
                });
            }

            function drawNetwork() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw connections - MUCH more visible now
                for (let i = 0; i < particles.length; i++) {
                    for (let j = i + 1; j < particles.length; j++) {
                        const dx = particles[i].x - particles[j].x;
                        const dy = particles[i].y - particles[j].y;
                        const dist = Math.sqrt(dx * dx + dy * dy);
                        
                        if (dist < connectionDistance) {
                            // Opacity fades with distance - higher base opacity
                            const opacity = 0.6 * (1 - dist / connectionDistance);
                            ctx.beginPath();
                            ctx.strokeStyle = `rgba(139, 92, 246, ${opacity})`;
                            ctx.lineWidth = 2; // Thicker lines
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(particles[j].x, particles[j].y);
                            ctx.stroke();
                        }
                    }
                    
                    // Connect to mouse if nearby - creates interactive web
                    if (mouse.x && mouse.y) {
                        const dx = particles[i].x - mouse.x;
                        const dy = particles[i].y - mouse.y;
                        const dist = Math.sqrt(dx * dx + dy * dy);
                        
                        if (dist < mouseRadius) {
                            const opacity = 0.8 * (1 - dist / mouseRadius);
                            ctx.beginPath();
                            ctx.strokeStyle = `rgba(20, 184, 166, ${opacity})`; // Bright teal for mouse
                            ctx.lineWidth = 2.5;
                            ctx.moveTo(particles[i].x, particles[i].y);
                            ctx.lineTo(mouse.x, mouse.y);
                            ctx.stroke();
                            
                            // Particles grow when near mouse
                            particles[i].size = particles[i].baseSize * (1.8 - dist / mouseRadius * 0.8);
                        } else {
                            particles[i].size = particles[i].baseSize;
                        }
                    }
                }
                
                // Draw particles with glow effect - MORE VISIBLE
                for (const p of particles) {
                    // Outer glow
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size * 3, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(139, 92, 246, 0.1)';
                    ctx.fill();
                    
                    // Middle glow
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size * 1.5, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(139, 92, 246, 0.3)';
                    ctx.fill();
                    
                    // Core - bright and visible
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(167, 139, 250, 0.9)'; // Brighter purple
                    ctx.fill();
                    
                    p.x += p.vx;
                    p.y += p.vy;
                    
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                }
                
                requestAnimationFrame(drawNetwork);
            }
            drawNetwork();
        }
    </script>
    
    <!-- Exit Popup Component -->
    <script src="../js/components/exit-popup.js?v=3e6f418"></script>
    
    <!-- State Manager -->
    <script src="../js/state-manager.js?v=3e6f418"></script>
</body>
</html>

# Adava University Landing Page - Cursor Rules

## â›”â›”â›” ALL IMPLEMENTATION WORK MUST BE IN A WORKTREE â›”â›”â›”

**NEVER make code changes directly in `adavauniversity.org/`. ALWAYS create a worktree first.**

### MANDATORY WORKFLOW FOR ANY TASK:
```bash
# 1. Create a worktree for your task
cd "/Users/lucas/cursor projects/adavauniversity.org"
git worktree add "../adavauniversity-<task-name>" -b "feature/<task-name>"

# 2. Work in the worktree
cd "../adavauniversity-<task-name>"
# ... make all your changes here ...

# 3. When done, merge back to main
cd "/Users/lucas/cursor projects/adavauniversity.org"
git merge "feature/<task-name>" -m "Merge: <description>"
git push origin main

# 4. Update deploy and push
cd "../adavauniversity.org-deploy"
git merge main -m "Deploy: <description>"
git push origin deploy

# 5. Cleanup worktree
cd "/Users/lucas/cursor projects/adavauniversity.org"
git worktree remove "../adavauniversity-<task-name>"
git branch -d "feature/<task-name>"
```

### THIS IS FORBIDDEN:
- âŒ Making ANY code changes in `adavauniversity.org/` directory
- âŒ Committing directly to `main` branch
- âŒ Working without a worktree
- âŒ Leaving worktrees unmerged for too long

### EXISTING WORKTREES:
```bash
git worktree list  # See all worktrees
```

| Worktree | Branch | Purpose |
|----------|--------|---------|
| `adavauniversity.org/` | main | Main development |
| `adavauniversity.org-deploy/` | deploy | Production deploys |

### WHY:
- Multiple AI agents may work on this repo simultaneously
- Worktrees prevent merge conflicts and lost work
- Keeps `main` and `deploy` branches clean and stable
- Enables parallel development without conflicts

**VIOLATION = MERGE CONFLICTS, LOST WORK, BROKEN DEPLOYMENTS. NO EXCEPTIONS.**

### WHY:
- Prevents merge conflicts between agents
- Each agent has isolated workspace
- Main directory stays clean for other agents

**VIOLATION = CONFLICTS AND BROKEN WORK FOR OTHER AGENTS**

---

## â›”â›”â›” NEVER RUN LONG COMMANDS WITHOUT PROGRESS FEEDBACK â›”â›”â›”

**CRITICAL: Commands that process multiple items MUST print feedback IMMEDIATELY and FREQUENTLY.**

### THIS IS FORBIDDEN:
- Running a script that processes 100+ items with no output for 30+ seconds
- Buffering output until the end
- Using `tail` or waiting for completion on long scripts
- Any command that might timeout without showing progress

### ALWAYS DO THIS:
1. Print progress EVERY item or every few seconds: `[1/100] Processing X...`
2. Use `process.stdout.write()` for inline updates
3. Use `console.log()` after each item completes
4. For long scripts, run in batches of 20-50 items max
5. If a script doesn't have progress output, FIX IT FIRST before running

**VIOLATION = TIMEOUT AND USER FRUSTRATION. NO EXCEPTIONS.**

---

## â›”â›”â›” NEVER GIT CHECKOUT WITHOUT CHECKING UNCOMMITTED CHANGES â›”â›”â›”

**CRITICAL: Never run `git checkout` or `git restore` without first checking `git status`.**

### THIS IS FORBIDDEN:
- `git checkout filename` without checking status first
- `git restore filename` without asking user
- Any command that overwrites working directory files

### ALWAYS DO THIS:
1. Run `git status` FIRST to see uncommitted changes
2. If there are changes, ASK the user before reverting
3. To VIEW original without overwriting: `git show HEAD:filename`
4. NEVER assume the user wants to lose their work

**VIOLATION = LOST USER WORK. UNRECOVERABLE. NO EXCEPTIONS.**

---

## ðŸ“– BEFORE STARTING ANY WORK - READ FIRST!

**Before doing ANY task, you MUST:**

### 1. Read the file structure
```bash
ls -la
```

### 2. Read ALL relevant .md files
- `README.md` - Project overview (if exists)
- `docs/adava-website-reference.md` - Original site reference/copy
- `docs/UI-EFFECTS-RESEARCH.md` - UI effects to implement
- Any other `.md` files in `docs/`

### 3. Check existing code patterns
- Look at how similar sections are implemented in `index.html`
- Check the existing CSS patterns in `styles.css`
- Understand the color palette and design language

### WHY:
- Prevents duplicate work
- Ensures consistency with existing code
- Avoids breaking existing functionality

**VIOLATION = WASTED TIME AND BROKEN CODE**

---

## â›”â›”â›” ALWAYS ADD TESTS FOR NEW FEATURES & BUG FIXES â›”â›”â›”

**EVERY new feature or bug fix MUST have accompanying tests. NO EXCEPTIONS.**

### MANDATORY CHECKLIST BEFORE COMMITTING:

1. **For NEW FEATURES:**
   - [ ] Add unit tests to `scripts/test-runner.js` for the new functionality
   - [ ] Run `npm test` to verify all tests pass
   - [ ] For UI features, add/update UX tests in `tests/ux.spec.js`

2. **For BUG FIXES:**
   - [ ] Add regression test that would have caught the bug
   - [ ] Document the bug and fix in commit message
   - [ ] Run `npm test` to verify fix doesn't break other things

3. **For UI/UX CHANGES:**
   - [ ] Add/update UX tests in `tests/ux.spec.js`
   - [ ] Run UX smoke tests: `npm run test:ux:smoke`
   - [ ] Visual verification via screenshot

### Testing Requirements - CRITICAL and AUTOMATIC

#### âš ï¸ UX TESTING AFTER UI CHANGES - MANDATORY âš ï¸

**After ANY UI/UX/CSS change, you MUST run UX tests:**

```bash
# Quick validation (after small UI tweaks):
npm run test:ux:smoke

# Thorough testing (after significant UI changes):
npm run test:ux
```

### Test Tiers (by speed and importance)

| Tier | Command | Time | When |
|------|---------|------|------|
| **Unit** | `npm test` | **~1s** | Every commit (automatic) |
| **Smoke** | `npm run test:ux:smoke` | **~5s** | After UI changes, before PRs |
| **Full UX** | `npm run test:ux` | **~20s** | After significant UI changes |
| **All Tests** | `npm run test:full` | **~25s** | Before release |

### WHAT TESTS COVER:
| Area | Tests |
|------|-------|
| File existence | index.html, styles.css, reference docs |
| HTML structure | DOCTYPE, viewport, title, lang |
| Landing page content | Headlines, CTAs, credentials |
| Instructors section | Universities, FAANG companies |
| Testimonials | Salary info, believable backgrounds |
| Curriculum | 10-day structure |
| Pricing | Cost, guarantee |
| CSS | Variables, responsive, layout |
| Design consistency | Adava style colors |
| Accessibility | Semantic HTML, form labels |
| UI Effects | Glassmorphism, animations, tilt |

### Rules
1. **Run tests before every commit** - Automated via pre-commit hook
2. **Test count can ONLY increase** - Never decrease number of tests
3. **Commits are BLOCKED if tests fail**
4. **Test results are automatically added to commit messages**

**ADD THE TEST IMMEDIATELY. NOT "LATER". NOW.**

---

## ðŸ“– CURSOR RULES FILES

**Additional detailed rules are in `.cursor/rules/`:**

| File | Purpose |
|------|---------|
| `testing.mdc` | Which tests to run for which file changes |
| `ui-development.mdc` | Rules for responsive UI development |
| `self-verification.mdc` | How to verify changes before committing |

**Read these files when doing related work.**

---

## ðŸ”¥ CRITICAL: LESSONS LEARNED - READ THIS FIRST! ðŸ”¥

**âš ï¸ See `LESSONS-LEARNED-DEBUGGING.md` for detailed insights from real debugging sessions.**

### Quick Reference - Common Issues:

#### 1. **Node.js Version - UPGRADED TO NODE 16 âœ…**
```javascript
// âœ… USE MODERN SYNTAX - Server now supports it!
options?.encoding          // Optional chaining - WORKS
value ?? 'default'         // Nullish coalescing - WORKS

// âŒ NEVER downgrade code for old infrastructure
// Always upgrade infrastructure instead!
```

**Server Node version:** 16.20.2 (upgraded from 8.10.0)  
**How:** Using nvm (Node Version Manager)  
**Check server:** `ssh lucas@adavauniversity.org "source ~/.nvm/nvm.sh && node --version"`

**Key Lesson:** Upgrade infrastructure, don't downgrade code quality!

#### 2. **Z-Index Layering for Backgrounds**
```css
/* âœ… CORRECT */
#network-bg, canvas, .particle-bg {
    z-index: 0;  /* Background = 0 or negative */
}
.hero-container, section, main {
    z-index: 10;  /* Content = 10+ */
}
```

#### 3. **Auto-Deploy System**
- Server auto-pulls from `origin/deploy` every **10 seconds**
- Tests run automatically on each pull
- **Auto-reverts if tests fail** (see logs)
- Check logs: `ssh lucas@adavauniversity.org "tail -50 /home/lucas/logs/adavauniversity-deploy.log"`

#### 4. **UX Anti-Patterns to AVOID**
- âŒ Auto-filling form fields (breaks trust)
- âŒ Buttons that submit without showing options
- âœ… Guide users: Click â†’ Scroll â†’ Focus â†’ Fill â†’ Submit

#### 5. **Debugging Failed Deployments**
```bash
# Step-by-step debugging checklist:
ssh lucas@adavauniversity.org "cd /home/lucas/www/adavauniversity.org && git log --oneline -1"
ssh lucas@adavauniversity.org "tail -50 /home/lucas/logs/adavauniversity-deploy.log"
ssh lucas@adavauniversity.org "cat /tmp/test-output.txt"
```

**ALWAYS check deploy logs if site seems stuck on old version!**

---

## â›”â›”â›” NEVER STOP TO ASK - JUST DO THE WORK â›”â›”â›”

**NEVER interrupt your task to ask the user if you should continue.**

### THIS IS FORBIDDEN:
- "Should I proceed?" â† FORBIDDEN
- "Would you like me to..." â† FORBIDDEN  
- "Do you want me to continue?" â† FORBIDDEN
- Stopping work to ask for permission â† FORBIDDEN

### ALWAYS DO THIS INSTEAD:
1. Just do the work
2. If something is blocked, work around it or note it and move on
3. Keep working until the task is DONE

### WHY:
- Stopping to ask wastes time
- The user asked you to do something - DO IT
- If you need clarification on WHAT to do, ask. If you know what to do, JUST DO IT.

---

## â›” VISUAL VERIFICATION - MANDATORY - NO EXCEPTIONS â›”

**NEVER claim UI/visual work is "done" without PROOF via screenshot!**

### PROCEDURE FOR ANY UI/CSS/VISUAL CHANGE:

1. **BEFORE claiming done:**
   ```
   Step 1: Make the CSS/HTML change
   Step 2: Navigate browser to page (browser_navigate)
   Step 3: Wait for page load (browser_wait_for)
   Step 4: Take screenshot (browser_take_screenshot)
   Step 5: LOOK at the screenshot image
   Step 6: If issues found â†’ go back to Step 1
   Step 7: Only after screenshot looks correct â†’ commit
   ```

2. **Visual verification checklist:**
   - [ ] Colors match Adava style (purple/magenta, gold CTAs)
   - [ ] Text is readable
   - [ ] Buttons are visible and styled
   - [ ] Forms are functional looking
   - [ ] Responsive layout works
   - [ ] No obvious visual bugs

3. **If you cannot take screenshot:** DO NOT claim the work is done. Say "I cannot verify this visually - please check manually"

**VIOLATION OF THIS RULE = BROKEN TRUST**

---

## Code Organization Rules

1. **HTML in HTML, CSS in CSS** - Keep them separate
2. **Use semantic HTML** - header, nav, main, section, footer
3. **CSS uses variables** - All colors should reference :root variables
4. **Mobile-first responsive** - Start with mobile, enhance for desktop

---

## Version Control - CRITICAL and AUTOMATIC

1. **ALWAYS use git versioning for EVERY change** - This is mandatory
2. **Commit immediately after making changes** - Don't wait
3. **Pre-commit hook runs tests automatically** - Blocks bad commits
4. **prepare-commit-msg hook adds test results** - Documents test count
5. **Never leave uncommitted changes** - Always commit before moving to new tasks

---

## Git Hooks Installed

1. **pre-commit**: Runs test-runner.js, blocks commit if tests fail
2. **prepare-commit-msg**: Appends "--- Tests: âœ… X passed, 0 failed" to commit messages
3. **.test-count**: File tracking current number of tests (must only increase)

---

## â›” DEPLOYMENT - ALWAYS SYNC BRANCHES PROPERLY â›”

**Branches MUST stay in sync. NEVER make independent commits to deploy branch.**

### âš ï¸ PREVENTING MERGE CONFLICTS:
- **deploy branch** should ONLY receive merges from main
- **NEVER commit directly to deploy** (except merge commits)
- If branches diverge, sync them FIRST before any new work

### Deployment Workflow:
```bash
# 1. FIRST: Ensure branches are in sync
git fetch origin
git merge origin/deploy -m "Sync deploy into main"  # Bring any deploy changes into main

# 2. Commit your changes (tests run automatically)
git add -A && git commit -m "Your message"

# 3. Push main branch
git push origin main

# 4. Merge main to deploy (use the deploy worktree)
cd ../ai-coding-course-deploy
git pull origin deploy
git merge origin/main -m "Merge main"
git push origin deploy

# 5. Back to main worktree
cd ../ai-coding-course
```

### If Merge Conflict Occurs:
```bash
# Sync deploy into main first
git fetch origin
git merge origin/deploy -m "Sync deploy"
# Resolve any conflicts, then continue with workflow above
```

### Auto-Deploy on Server:
- Server pulls from `deploy` branch every 10 seconds
- Tests run automatically
- Reverts if tests fail
- Logs: `/home/lucas/logs/adavauniversity-deploy.log`

### Blocked Directories (nginx returns 404):
- `scripts/` - test-runner.js, setup scripts
- `docs/` - UI-EFFECTS-RESEARCH.md, reference docs
- `.credentials/` - API keys (dotted = truly secret)
- `.git/` - Git internals

**NEVER push only one branch. ALWAYS push both.**

---

## Browser Testing

1. Use local HTTP server: `python3 -m http.server 8888`
2. Access at: http://localhost:8888/
3. YouTube embeds and some features don't work with file:// protocol

---

## Code Standards

### ALLOWED:
1. **Plain HTML, CSS, JavaScript** only
2. **Google Fonts** via CDN
3. **Modern CSS** - Grid, Flexbox, Variables, clamp()
4. **Optional JS libraries** via CDN (AOS, Vanilla Tilt, etc.)

### FORBIDDEN - DO NOT USE:
- âŒ TypeScript
- âŒ npm / yarn / pnpm for the landing page
- âŒ Webpack / Vite / Rollup / any bundler
- âŒ React / Angular / Vue / Svelte
- âŒ SASS/LESS (use native CSS)

### Design Requirements (Adava Style):
1. **Dark theme** - Dark purple/black backgrounds
2. **Purple/Magenta accents** - Primary colors
3. **Gold/Yellow CTAs** - For action buttons
4. **University colors** - MIT blue, Stanford green, etc.
5. **Professional but exciting** - Clean, conversion-focused

---

## Feature Checklist

- [x] Hero section with headline
- [x] Instructor section with credentials
- [x] Testimonials with believable backgrounds
- [x] Curriculum (10 days)
- [x] Pricing/admissions
- [x] Money-back guarantee
- [x] Application forms
- [x] Cohort schedule
- [x] Automated tests (67+ tests)
- [x] Git hooks for enforcement
- [x] UI effects - ALL IMPLEMENTED âœ…

---

## ðŸŽ¨ UI Effects Implemented (See UI-EFFECTS-RESEARCH.md)

### CSS-Only Effects
| Effect | Implementation |
|--------|---------------|
| Glassmorphism | `backdrop-filter: blur()` + `-webkit-backdrop-filter` on cards |
| Animated Gradients | `@keyframes gradientShift` + `background-size: 200%` |
| Glow Effects | `box-shadow: 0 0 Xpx` on buttons with hover states |
| Noise Texture | Subtle overlays via CSS |

### JavaScript Libraries (All via CDN)
| Library | Purpose | CDN |
|---------|---------|-----|
| AOS.js | Scroll reveal animations | unpkg.com/aos@2.3.4 |
| Vanilla Tilt | 3D card tilt on hover | unpkg.com/vanilla-tilt@1.8.1 |
| GSAP | Advanced scroll animations | unpkg.com/gsap@3.12.5 |
| ScrollTrigger | Scroll-triggered GSAP animations | unpkg.com/gsap@3.12.5 |

### Interactive Effects
| Effect | How It Works |
|--------|--------------|
| Counter Animation | `IntersectionObserver` + `animateCounter()` function |
| Mouse Parallax | `mousemove` event on hero section |
| Custom Cursor | Two elements: `.custom-cursor` + `.cursor-dot` |
| 3D Card Tilt | `data-tilt` attributes + VanillaTilt.init() |

### Adding New UI Effects

**Always follow this pattern:**

1. **Add test FIRST** (TDD approach):
   ```javascript
   test('New effect description', () => {
       const html = fs.readFileSync('index.html', 'utf8');
       assert(html.includes('new-effect-class'), 'Missing new effect');
   });
   ```

2. **Run tests** (should fail):
   ```bash
   node test-runner.js
   ```

3. **Implement the effect**

4. **Run tests again** (should pass)

5. **Visual verification** (screenshot)

6. **Commit with tests**

### Data Attributes for Effects

```html
<!-- AOS Scroll Animation -->
<div data-aos="fade-up" data-aos-delay="100">

<!-- Vanilla Tilt 3D Effect -->
<div data-tilt data-tilt-max="15" data-tilt-scale="1.03" data-tilt-glare data-tilt-max-glare="0.15">
```

### CSS Classes for Effects

```css
/* Glassmorphism */
.glass-card {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

/* Glow Button */
.btn-glow {
    box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
}
.btn-glow:hover {
    box-shadow: 0 0 30px rgba(245, 158, 11, 0.5);
}

